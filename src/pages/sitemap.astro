---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import PageHeader from '@components/PageHeader.astro'
import { Heading, Notification } from 'accessible-astro-components'
import { getCollection } from 'astro:content'

// Get all portfolio projects
const projects = await getCollection('projects')

// Define static pages with their descriptions
const staticPages = [
  {
    title: 'ChaosCosmos Home',
    url: '/',
    description: 'Business Consulting services for emerging start-ups and established enterprises.',
  },
]
---

<DefaultLayout
  title="Sitemap"
  description="Complete site map showing all pages, portfolio projects, and sections available on our accessible website."
>
  <PageHeader
    title="Sitemap"
    subtitle="A comprehensive overview of all pages and content available on our website, organized for easy navigation."
    bgType="gradient"
  />

  <section class="my-16">
    <div class="container space-y-12">
      <!-- Main Pages Section -->
      <div>
        <Heading level="h2" class="mb-6">Main pages</Heading>
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {
            staticPages.map((page) => (
              <article>
                <Heading level="h3" size="h6" class="mb-3">
                  <a href={page.url}>{page.title}</a>
                </Heading>
                <p class="mb-3">{page.description}</p>
                <p class="text-xs">
                  URL:{' '}
                  <code class="rounded bg-neutral-100 px-1 py-0.5 text-xs text-neutral-500 dark:bg-neutral-800 dark:text-neutral-500">
                    {page.url}
                  </code>
                </p>
              </article>
            ))
          }
        </div>
      </div>

      <!-- Portfolio Projects Section -->
      <div>
        <Heading level="h2">Portfolio projects</Heading>
        <p class="mb-6">
          Explore our collection of {projects.length} accessibility-focused projects showcasing inclusive design and development
          practices.
        </p>
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {
            projects.map((project) => (
              <article>
                <Heading level="h3" size="h6" class="mb-3">
                  <a href={`/portfolio/${project.data.slug ?? project.id}`}>{project.data.title}</a>
                </Heading>
                <p class="mb-3">{project.data.description}</p>
                <div class="text-xs">
                  <p class="mb-1">
                    By: <span class="font-medium">{project.data.author}</span>
                  </p>
                  <p>
                    URL:{' '}
                    <code class="rounded bg-neutral-100 px-1 py-0.5 text-xs text-neutral-500 dark:bg-neutral-800 dark:text-neutral-500">
                      /portfolio/{project.data.slug ?? project.id}
                    </code>
                  </p>
                </div>
              </article>
            ))
          }
        </div>
      </div>

      <!-- Blog Section -->
      <div>
        <Heading level="h2" class="mb-6">Blog</Heading>
        <article>
          <Heading level="h3" size="h6" class="mb-3">
            <a href="/blog"> Blog posts </a>
          </Heading>
          <p>
            Discover articles about web accessibility, development best practices, and inclusive design. Our blog
            features dynamic content with pagination for easy browsing.
          </p>
          <div class="text-xs">
            <p>Features: Dynamic content from JSONPlaceholder API</p>
            <p>
              Base URL: <code
                class="rounded bg-neutral-100 px-1 py-0.5 text-xs text-neutral-500 dark:bg-neutral-800 dark:text-neutral-500"
                >/blog</code
              >
            </p>
            <p>
              Individual posts: <code
                class="rounded bg-neutral-100 px-1 py-0.5 text-xs text-neutral-500 dark:bg-neutral-800 dark:text-neutral-500"
                >/blog/[post-title]</code
              >
            </p>
          </div>
        </article>
      </div>

      <!-- Technical Information -->
      <Notification type="info" variant="accent">
        <div class="space-content">
          <Heading level="h2" size="h6" class="mb-4">Technical sitemap information</Heading>
          <ul>
            <li>
              <span class="font-bold">XML Sitemap:</span> An automated XML sitemap is generated at
              <code>/sitemap.xml</code>
              for search engine optimization.
            </li>
            <li>
              <strong>Generated by:</strong> @astrojs/sitemap integration configured in astro.config.mjs
            </li>
            <li>
              <strong>Last updated:</strong> Automatically updated on each build
            </li>
          </ul>
        </div>
      </Notification>
    </div>
  </section>
</DefaultLayout>

<style>
  article {
    border: 1px solid var(--border-color-subtle);
    border-radius: var(--radius-large);
    background-color: var(--background-color);
    padding: 1rem;
  }
</style>
